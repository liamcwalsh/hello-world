<!DOCTYPE html>
<html>
  <head>
    <title><%= title %></title>
    <script type="text/javascript" src="bower_components/d3/d3.min.js"></script>
    <script type="text/javascript" src="bower_components/jquery/dist/jquery.min.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/KaTeX/0.3.0/katex.min.js"></script>
    <link rel='stylesheet' href='/stylesheets/cerulean.min.css' />
    <link rel='stylesheet' href='/stylesheets/style.css' />
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/KaTeX/0.3.0/katex.min.css">

   </head>
   <body>
<xmp theme="cerulean" style="display:none;">


## Background

<p> A common problem in business is the question of what price to charge, or, similarly, how much of a discount to offer on a good. A firm has to balance two, often conflicting restraints. They have to charge a price high enough so that they can maximize their own profit, but they also have to ensure the price is at a level which makes consumers want to buy the good. The question, then, becomes this: How can one optimize the profit, under these restraints? </p>

## The Discrete Choice Model
 
 <p> Typically, the higher the price of a good, the less likely a consumer is to purchase that good. Further, the probability of purchase is dependent upon the product itself, the price of the product, and the consumer. In some cases, a firm is able to segment a market into smaller sections, or even down to the individual level. In this model, I assume that the firm in question is able to cater the price to a specific. As such, this allows me to assume that the consumer, and thus the preferences associated with that consumer, remain constant. Next, since we are only discussing a single good, the attributes of the good in the model remain constant as well. Thus, the only thing which will be varied is the price. A common model to employ in this context is the Discrete Choice Model. This model is characterized by how the probability of purchase of a good is defined. In this case, the probability is calculated as a logistic regression model. </p>

 ## The Logisitic Regression Model
 <p>The logistic regression model takes its name from the fact that it utilizes the logistic function to calculate probability. The logistic function looks like the following: </p>
<span class="katex"> P = \frac{e^U}{1+e^U} </span>

<p> This is a particularly useful model, as it limits P within [0,1] </p>

<p> Next, the logistic regression model defines U in a more explicit manner. In this case, one can consider U to be the utility of a particular product. For this model, I assumed U to be a linear function of p, the price: </p>

<span class="katex"> U= \alpha + \beta p </span>

<p> n this model, &alpha; is a scalar representing the preferences of a particular consumer with respect to the good in question. &beta;, likewise, is a negative scalar determining how p affects utility, based on the consumer’s preference. When we combine both the logistic function and the utility function, or probability function becomes the following: </p>

<span class="katex"> P = \frac{e^{\alpha + \beta p}{1+e^{\alpha + \beta p}}} </span>

<p> Visually, when α = 4 and β = -.01, the graph of this probability function looks like the following: </p>

<img src="/images/blog/discrete_choice/probvprice.png" style="width: 500px; margin: 0 auto; display: block;"/>

## Revenue and Profit

<p>For an individual person, the expected revenue is simply the price of the good times the probability of purchase: </p>

<span class="katex"> R=Pp=p\frac{e^U}{1+e^U} </span>

<p> We can extend this model to account for profit, which is defined in the following way, where the variable c represents cost: </p>

<span class="katex"> \pi=Pp - Pc_{marginal} - c_{fixed} </span>

<p> However, the math to optimize this profit function is nearly identical to that of optimizing the revenue function, so for simplicity, I will only use the revenue function. </p>

## Analytic Calculation

<p>While this problem can be solved numerically, often an analytic solution to such a problem helps to reduce computation time, and simplifies the entire process. It can also help to make coding the solution to this problem more straightforward, and easier to read. I seek to maximize profit, with respect to the price, p. This is a standard calculus problem, that is, take the first derivative of profit with respect to p, and set the equation to zero. From there, we must rearrange to find explicitly some optimal price p&#42; in terms of &alpha; and &beta;. First, as the natural logarithm function is monotonic, I can maximize the log of our revenue function, and still preserve the true value of p&#42;. This is merely done for ease of differentiation, not for any technical reason. We have: </p>

<span class="katex"> ln(R)=ln(p) + \alpha + \beta p - ln(1+e^{\alpha+\beta p}) </span>

<p> Deriving with respect to p, then setting the equation equal to 0 yields: </p>

<span class="katex"> 0=\frac{1}{p} + \beta + \frac{\beta e^{\alpha+\beta p}}{1+e^{\alpha+\beta p}} </span>

<p> After some algebraic rearrangement, the following equation is left: </p>

<span class="katex"> e^{\alpha + \beta p} =-( \beta p +1)  </span>

<p> To solve this equation for p*, I discovered the <a href="https://en.wikipedia.org/wiki/Lambert_W_function">Lambert W Function</a> was necessary </p>

## The Lambert W Function

<p>This function, W(x), can be defined implicitly as: </p>

<span class="katex"> x=W(x)e^{W(x)} </span>

<p> nfortunetly, there does not exist a simple equation relaying the value of W(x). Instead, it must be represented in a series expansion, like the following, found from <a href="http://mathworld.wolfram.com/LambertW-Function.html">WolframMathWorld</a>: </p>

<span class="katex"> (x)=\sum_{n=1}^{\infty} {\frac{(-1)^{n-1} (n^{n-2})}{(n-1)!} x^n}, \quad |x|&lt;\frac{1}{e} </span>

## Finding the Optimal Price

<p> To use the Lambert W function, I had to do some rearrangement, and came up with the following equality: </p>

<span class="katex"> e^{\alpha -1}=-(\beta p +1)e^{-\beta p -1} </span>

<p> Then, after some simple rearrangement, I arrived at an explicit equation for the optimal price, p*: </p>

<span class="katex"> p^*=-\frac{W(e^{\alpha -1}) +1}{\beta} </span>

## Numerical Calculation: Varying &alpha;

<p> In this case, no longer do I seek to find p* through an explicit formula, but instead I have a computer sort through all the values to find a maximum. Typically, the best method of search for a maximum is done through a binary search algorithm. I created 2 graphs in MATLAB. In this first one, I let β=-.1, and varied α between 0 and 10 in .5 step increments. </p>

<img src="/images/blog/discrete_choice/vary_alpha.png" style="width: 500px; margin: 0 auto; display: block;"/>

<p> There are two things which one can immediately glean from this graph. First, one can see that as &alpha; increases, so does p&#42; and the maximum revenue. This is consistent with our findings from the analytic calculations, as &alpha; is found within the Lambert W function, which is increasing. This finding also makes sense on an intuitive level; As &alpha; increases, a customer's utility becomes more heavily defined in terms of the other reasons why the good is desirable. As increases, the consumer becomes more and more interested in the good itself, rather than the price of the good. In this case, one can charge a higher price on the good without affecting the overall utility of the good to a consumer, which leads to higher revenue. </p>

<p> A second finding is that the maxima occur in a linear fashion, which is curious. </p>


## Numerical Calculation: Varying &beta;

<p> I also created a graph which shifts β values, from -.05 to -.49, while holding &alpha;=4: </p>

<img src="images/blog/discrete_choice/vary_beta.png" style="width: 500px; margin: 0 auto; display: block;"/>

<p> First, notice that as &beta; increases in magnitude, the optimal price falls, as does the maximum revenue. Not only is this consistent with the analytic solution for p&#42; (since p&#42; is inversely proportional to &beta;), but it also makes logical sense. A larger &beta; means that utility is more heavily affected by the price. The consumer is more concerned about the price of the good, rather than what they like about the good. This then affects the probability function, and the revenue function. </p>

<p> Again, the maxima occur in a near linear fashion. Given that in both cases of varying &alpha; and &beta; that the maxima occur in a linear fashion, there may be some way to find a simpler approximation for p&#42;, perhaps even removing the need for the Lambert W function. </p>

## Comparison of Analytic vs Numerical Calculation

<p> At the end of the day, while it is interesting to find an explicit formula for p&#42;, it is more important to discover if this formula can actually be of any use. First, we can use the explicit formula to determine how accurate the maxima found numerically are: </p>

<img src="images/blog/discrete_choice/alpha_num_vs_analy.png" style="width: 500px; margin: 0 auto; display: block;"/>

<p> Here, the filled orange circles represent the maxima found analytically, and the black, empty circles are the numerically found maxima. Clearly, the numerically found maxima are pretty accurate. I calculated that the percent error was on the scale of 10^-6 </p>

<p>Now that I know that the numerical maxima are accurate, I want to know which method is faster in runtime. </p>

<img src="images/blog/discrete_choice/analy_vs_numer_runtime.png" style="width: 500px; margin: 0 auto; display: block;"/>

<p> The answer, quite clearly, is that the numerical calculation is faster. In this case, the average runtime of the analytic calculation was .0301s, where it only took an average of .00012986s for the numerical calculation. </p>

## Concluding Remarks

<p> Overall, I discovered that while there does exist an explicit equation determining the price which optimizes revenue, it is unfit for practical use as its runtime is too high. However, I also noticed a trend in the maxima when varying &beta; and &alpha;: The maxima occurred in a linear fashion. This seems to indicate that there may be a way to approximate the equation for the optimal price. If so, this raises a few questions: </p>

<p> What is the explicit form of the approximation? </p>
<p> Is it accurate enough for practical use? </p>
<p> Is the runtime of the approximation better than that of the simple numerical finding of the optimal price? </p>

</xmp>

<script src="bower_components/strapdown/strapdown.js"></script>
<link rel="stylesheet" href="bower_components/strapdown/strapdown.css">

<script type="text/javascript">
 $(".katex").each(function() {
  katex.render(this.innerHTML, this, {displayMode: true });
});
</script>	
  </body>
</html>